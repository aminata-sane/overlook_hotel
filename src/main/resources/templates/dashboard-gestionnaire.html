<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overlook Hotel - Espace Gestionnaire</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js" rel="preload">
    <style>
        :root {
            --primary-color: #dc3545;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }

        body {
            background: linear-gradient(135deg, #ffeef0 0%, #ffe0e2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }

        .navbar-custom {
            background: linear-gradient(135deg, var(--primary-color) 0%, #b02a37 100%);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
        }

        .dashboard-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #b02a37 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .dashboard-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .executive-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 30px rgba(220, 53, 69, 0.1);
            transition: all 0.3s ease;
            border-top: 4px solid var(--primary-color);
            margin-bottom: 2rem;
        }

        .executive-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(220, 53, 69, 0.15);
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .kpi-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            border-left: 4px solid;
            transition: transform 0.3s ease;
        }

        .kpi-card:hover {
            transform: translateY(-3px);
        }

        .kpi-card.revenue { border-left-color: var(--success-color); }
        .kpi-card.occupancy { border-left-color: var(--info-color); }
        .kpi-card.satisfaction { border-left-color: var(--warning-color); }
        .kpi-card.employees { border-left-color: var(--primary-color); }

        .kpi-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .kpi-label {
            font-size: 0.9rem;
            color: var(--secondary-color);
            text-transform: uppercase;
            font-weight: 500;
        }

        .kpi-trend {
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }

        .trend-up { color: var(--success-color); }
        .trend-down { color: var(--danger-color); }

        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .admin-actions {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        .admin-btn {
            display: block;
            width: 100%;
            padding: 1.2rem;
            margin-bottom: 1rem;
            border-radius: 10px;
            text-decoration: none;
            text-align: left;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: 500;
        }

        .admin-btn:hover {
            transform: translateX(5px);
            text-decoration: none;
        }

        .admin-btn-primary {
            background: linear-gradient(135deg, var(--primary-color), #b02a37);
            color: white;
        }

        .admin-btn-success {
            background: linear-gradient(135deg, var(--success-color), #1e7e34);
            color: white;
        }

        .admin-btn-warning {
            background: linear-gradient(135deg, var(--warning-color), #e0a800);
            color: var(--dark-color);
        }

        .admin-btn-info {
            background: linear-gradient(135deg, var(--info-color), #117a8b);
            color: white;
        }

        .admin-btn-dark {
            background: linear-gradient(135deg, var(--dark-color), #212529);
            color: white;
        }

        .alerts-panel {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        .alert-item {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 8px;
            border-left: 4px solid;
            display: flex;
            align-items: center;
        }

        .alert-critical {
            background: #f8d7da;
            border-left-color: var(--danger-color);
            color: #721c24;
        }

        .alert-warning {
            background: #fff3cd;
            border-left-color: var(--warning-color);
            color: #856404;
        }

        .alert-info {
            background: #d1ecf1;
            border-left-color: var(--info-color);
            color: #0c5460;
        }

        .breadcrumb-custom {
            background: transparent;
            padding: 0;
            margin-bottom: 1rem;
        }

        .breadcrumb-custom .breadcrumb-item a {
            color: white;
            opacity: 0.8;
        }

        .breadcrumb-custom .breadcrumb-item.active {
            color: white;
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-custom navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-hotel"></i> Overlook Hotel
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/gestionnaires">Dashboard</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="gestionDropdown" role="button" data-bs-toggle="dropdown">
                            Administration
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/employes/liste-gestionnaire">Gestion Personnel</a></li>
                            <li><a class="dropdown-item" href="/chambres">Gestion Chambres</a></li>
                            <li><a class="dropdown-item" href="/clients">Gestion Clients</a></li>
                            <li><a class="dropdown-item" href="/finances">Finances</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/rapports">Rapports</a></li>
                            <li><a class="dropdown-item" href="/dev/console"><i class="fas fa-code text-danger"></i> Console Développeur</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/fidelite">Fidélité</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/feedbacks">Feedbacks</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <i class="fas fa-home"></i> Accueil Client
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/portail">
                            <i class="fas fa-cogs"></i> Portail Professionnel
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Dashboard Header -->
    <div class="dashboard-header">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb breadcrumb-custom">
                    <li class="breadcrumb-item"><a href="/">Accueil</a></li>
                    <li class="breadcrumb-item"><a href="/portail">Portail Professionnel</a></li>
                    <li class="breadcrumb-item active">Espace Gestionnaire</li>
                </ol>
            </nav>
            <h1 class="dashboard-title">
                <i class="fas fa-user-cog"></i> Espace Gestionnaire
            </h1>
            <p class="dashboard-subtitle">
                Tableau de bord exécutif et outils d'administration
            </p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- KPI Cards -->
        <div class="kpi-grid">
            <div class="kpi-card revenue">
                <div class="kpi-value text-success">€127.5K</div>
                <div class="kpi-label">Chiffre d'Affaires Mensuel</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-arrow-up"></i> +12.5% vs mois dernier
                </div>
            </div>
            <div class="kpi-card occupancy">
                <div class="kpi-value text-info">87%</div>
                <div class="kpi-label">Taux d'Occupation</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-arrow-up"></i> +3.2% vs mois dernier
                </div>
            </div>
            <div class="kpi-card satisfaction">
                <div class="kpi-value text-warning">4.8/5</div>
                <div class="kpi-label">Satisfaction Client</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-arrow-up"></i> +0.2 vs mois dernier
                </div>
            </div>
            <div class="kpi-card employees">
                <div class="kpi-value text-danger">24</div>
                <div class="kpi-label">Employés Actifs</div>
                <div class="kpi-trend">
                    <i class="fas fa-minus"></i> Stable
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Charts Section -->
            <div class="col-lg-8">
                <div class="chart-container">
                    <h4 class="mb-3">
                        <i class="fas fa-chart-line text-primary"></i> Évolution des Revenus
                    </h4>
                    <canvas id="revenueChart" width="400" height="200"></canvas>
                </div>

                <div class="chart-container">
                    <h4 class="mb-3">
                        <i class="fas fa-chart-pie text-info"></i> Répartition des Réservations
                    </h4>
                    <canvas id="reservationChart" width="400" height="200"></canvas>
                </div>
            </div>

            <!-- Admin Actions & Alerts -->
            <div class="col-lg-4">
                <!-- Admin Actions -->
                <div class="admin-actions mb-4">
                    <h4 class="mb-3">
                        <i class="fas fa-cogs text-danger"></i> Actions Administrateur
                    </h4>
                    
                    <a href="/employes/liste-gestionnaire" class="admin-btn admin-btn-primary">
                        <i class="fas fa-users-cog"></i>
                        <span class="ms-2">Gestion Personnel</span>
                        <small class="d-block text-white-50 mt-1">Employés, planning, salaires</small>
                    </a>
                    
                    <a href="/gestionnaires/nouveau" class="admin-btn admin-btn-success">
                        <i class="fas fa-user-tie"></i>
                        <span class="ms-2">Créer Gestionnaire</span>
                        <small class="d-block text-white-50 mt-1">Enregistrer un nouveau gestionnaire</small>
                    </a>
                    
                    <a href="/dev/console" class="admin-btn admin-btn-dark">
                        <i class="fas fa-terminal"></i>
                        <span class="ms-2">Console Développeur</span>
                        <small class="d-block text-white-50 mt-1">Accès base de données H2</small>
                    </a>
                    
                    <a href="/finances" class="admin-btn admin-btn-success">
                        <i class="fas fa-chart-bar"></i>
                        <span class="ms-2">Rapports Financiers</span>
                        <small class="d-block text-white-50 mt-1">CA, dépenses, bénéfices</small>
                    </a>
                    
                    <a href="/configuration" class="admin-btn admin-btn-warning">
                        <i class="fas fa-sliders-h"></i>
                        <span class="ms-2">Configuration Système</span>
                        <small class="d-block mt-1">Paramètres généraux</small>
                    </a>
                    
                    <a href="/fidelite" class="admin-btn admin-btn-info">
                        <i class="fas fa-star"></i>
                        <span class="ms-2">Programme Fidélité</span>
                        <small class="d-block text-white-50 mt-1">Gestion des points et récompenses</small>
                    </a>
                </div>

                <!-- Alerts Panel -->
                <div class="alerts-panel">
                    <h4 class="mb-3">
                        <i class="fas fa-exclamation-triangle text-warning"></i> Alertes Système
                    </h4>
                    
                    <div class="alert-item alert-critical">
                        <i class="fas fa-exclamation-circle me-3"></i>
                        <div>
                            <strong>Maintenance Urgente</strong>
                            <p class="mb-0">Système climatisation Suite 301</p>
                        </div>
                    </div>
                    
                    <div class="alert-item alert-warning">
                        <i class="fas fa-clock me-3"></i>
                        <div>
                            <strong>Inventaire Bas</strong>
                            <p class="mb-0">Produits d'entretien < 20%</p>
                        </div>
                    </div>
                    
                    <div class="alert-item alert-info">
                        <i class="fas fa-info-circle me-3"></i>
                        <div>
                            <strong>Rapport Mensuel</strong>
                            <p class="mb-0">Prêt pour validation</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Revenue Chart
        const revenueCtx = document.getElementById('revenueChart').getContext('2d');
        const revenueChart = new Chart(revenueCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun'],
                datasets: [{
                    label: 'Revenus (€K)',
                    data: [98, 105, 112, 108, 125, 127],
                    borderColor: '#dc3545',
                    backgroundColor: 'rgba(220, 53, 69, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return value + 'K€';
                            }
                        }
                    }
                }
            }
        });

        // Reservation Chart
        const reservationCtx = document.getElementById('reservationChart').getContext('2d');
        const reservationChart = new Chart(reservationCtx, {
            type: 'doughnut',
            data: {
                labels: ['Suites', 'Chambres Standard', 'Chambres Premium'],
                datasets: [{
                    data: [35, 45, 20],
                    backgroundColor: [
                        '#dc3545',
                        '#17a2b8',
                        '#ffc107'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Animation des KPI cards
        document.addEventListener('DOMContentLoaded', function() {
            const kpiCards = document.querySelectorAll('.kpi-card');
            
            kpiCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(30px)';
                    card.style.transition = 'all 0.6s ease';
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100);
                }, index * 100);
            });
        });

        // Simulation de mise à jour en temps réel
        setInterval(function() {
            // Simulation de nouveaux revenus
            const revenueValue = document.querySelector('.kpi-card.revenue .kpi-value');
            const currentRevenue = parseFloat(revenueValue.textContent.replace('€', '').replace('K', ''));
            const newRevenue = currentRevenue + (Math.random() * 2 - 1); // +/- 1K
            revenueValue.textContent = `€${newRevenue.toFixed(1)}K`;
            
            // Effet visuel
            revenueValue.style.color = '#28a745';
            setTimeout(() => {
                revenueValue.style.color = '';
            }, 1000);
        }, 15000); // Toutes les 15 secondes
    </script>
</body>
</html>
