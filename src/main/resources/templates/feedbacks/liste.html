<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Avis Clients - Overlook Hotel</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; }
        .stats { display: flex; justify-content: space-around; margin: 20px 0; }
        .stat-card { background-color: #3498db; color: white; padding: 15px; border-radius: 5px; text-align: center; flex: 1; margin: 0 5px; }
        .stat-card.success { background-color: #27ae60; }
        .stat-card.warning { background-color: #f39c12; }
        .actions { margin: 20px 0; text-align: center; }
        .btn { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block; }
        .btn-primary { background-color: #3498db; color: white; }
        .btn-success { background-color: #27ae60; color: white; }
        .btn-warning { background-color: #f39c12; color: white; }
        .btn-danger { background-color: #e74c3c; color: white; }
        .btn:hover { opacity: 0.8; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f8f9fa; font-weight: bold; }
        tr:hover { background-color: #f5f5f5; }
        .note { font-size: 18px; }
        .alert { padding: 15px; margin: 10px 0; border-radius: 5px; }
        .alert-success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .nav-links { margin: 20px 0; text-align: center; }
        .nav-links a { margin: 0 10px; }
        .commentaire { max-width: 300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’¬ Gestion des Avis Clients</h1>
        
        <!-- Messages d'alerte -->
        <div th:if="${succes}" class="alert alert-success" th:text="${succes}"></div>
        <div th:if="${erreur}" class="alert alert-error" th:text="${erreur}"></div>
        
        <!-- Statistiques -->
        <div class="stats">
            <div class="stat-card">
                <h3 th:text="${nombreFeedbacks}">0</h3>
                <p>Total Avis</p>
            </div>
            <div class="stat-card success">
                <h3 th:text="${noteMoyenne}">0.0</h3>
                <p>Note Moyenne</p>
            </div>
            <div class="stat-card warning">
                <h3>â˜…â˜…â˜…â˜…â˜†</h3>
                <p>Satisfaction</p>
            </div>
        </div>
        
        <!-- Actions -->
        <div class="actions">
            <a href="/feedbacks/nouveau" class="btn btn-primary">â• Nouvel Avis</a>
            <a href="/feedbacks/rechercher" class="btn btn-success">ğŸ” Rechercher</a>
        </div>
        
        <!-- Liste de tous les feedbacks -->
        <h2>ğŸ“‹ Tous les Avis Clients</h2>
        <div th:if="${feedbacks != null and !feedbacks.empty}">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Client</th>
                        <th>Note</th>
                        <th>Commentaire</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="feedback : ${feedbacks}">
                        <td th:text="${feedback.id}">1</td>
                        <td th:text="${feedback.nomClient}">Client</td>
                        <td class="note">
                            <span th:text="${feedback.noteEtoiles}">â­â­â­â­â­</span>
                            <small th:text="'(' + ${feedback.note} + '/5)'"> (5/5)</small>
                        </td>
                        <td class="commentaire" th:text="${feedback.commentaire}" th:title="${feedback.commentaire}">Commentaire...</td>
                        <td th:text="${#temporals.format(feedback.dateCreation, 'dd/MM/yyyy HH:mm')}">01/01/2024 12:00</td>
                        <td>
                            <a th:href="@{'/feedbacks/' + ${feedback.id}}" class="btn btn-primary">ğŸ‘ï¸ Voir</a>
                            <form style="display:inline;" th:action="@{'/feedbacks/' + ${feedback.id} + '/supprimer'}" method="post" 
                                  onsubmit="return confirm('ÃŠtes-vous sÃ»r de vouloir supprimer cet avis ?')">
                                <button type="submit" class="btn btn-danger">ğŸ—‘ï¸ Supprimer</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div th:if="${feedbacks == null or feedbacks.empty}">
            <p style="text-align: center; color: #7f8c8d; font-style: italic;">
                Aucun avis client trouvÃ©. <a href="/feedbacks/nouveau">CrÃ©er le premier avis</a>
            </p>
        </div>
        
        <!-- Navigation -->
        <div class="nav-links">
            <a href="/" class="btn btn-primary">ğŸ  Accueil</a>
            <a href="/clients" class="btn btn-success">ğŸ‘¥ Clients</a>
            <a href="/chambres" class="btn btn-warning">ğŸ  Chambres</a>
            <a href="/employes" class="btn btn-primary">ğŸ‘¨â€ğŸ’¼ EmployÃ©s</a>
            <a href="/evenements" class="btn btn-success">ğŸ‰ Ã‰vÃ©nements</a>
            <a href="/installations" class="btn btn-warning">ğŸ¢ Installations</a>
        </div>
    </div>
</body>
</html>
